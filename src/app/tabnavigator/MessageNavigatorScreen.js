import React from 'react';
import { createMaterialTopTabNavigator } from '@react-navigation/material-top-tabs'

import ReceivedMessage from './messageNavigator/ReceivedMessage';
import SentMessage from './messageNavigator/SentMessage';
import Drafts from './messageNavigator/Drafts';

import StatusBarType from '../components/StatusBarType';
import { StatusBar, View, Text, Image } from 'react-native';


import Svg, { Defs, Pattern, LinearGradient, Stop } from 'react-native-svg';
import { Path as SvgPath } from 'react-native-svg';


const MessageTopTab = createMaterialTopTabNavigator();
const INITAL_ROUTE_NAME = 'Dashbaord';

export default function DiagnosisNavigatorScreen({ navigation, route }) {
    const [isLoading, setIsLoading] = React.useState(true);
    navigation.setOptions({ headerTitle: getHeaderTitle(route) });

    React.useEffect(() => {
        setTimeout(() => {
            setIsLoading(false);
        }, 50);
    }, []);


    if (isLoading) {
        return <View style={{ flex: 1, justifyContent: "center", alignItems: "center" }}>
            <Text>Loading.....</Text>
        </View>
    }
    return (
        <View style={{ height: '100%', width: '100%', flex: 1, flexDirection: 'column' }}>
            <StatusBarType />
            {/* <Header title="My Appointments" /> */}
            <MessageTopTab.Navigator initialRouteName={INITAL_ROUTE_NAME}
                screenOptions={({ route }) => ({
                    tabBarIcon: ({ focused, color, size }) => {
                        let iconName;

                        if (route.name === 'ReceivedMessage') {
                            iconName = focused ? <Svg viewBox="0 0 449.306 449.306" height={22} width={22} fill={color} fillRule="nonzero">
                                <SvgPath d="M447.739 250.776l-58.514-125.91a10.447 10.447 0 00-9.927-5.224h-50.155c-5.771 0-10.449 4.678-10.449 10.449s4.678 10.449 10.449 10.449h43.363l48.588 104.49h-59.559c-27.004-.133-51.563 15.625-62.694 40.229a48.588 48.588 0 01-43.886 27.69h-60.604a48.59 48.59 0 01-43.886-27.69c-11.131-24.604-35.69-40.362-62.694-40.229H29.257l57.469-104.49h33.437c5.771 0 10.449-4.678 10.449-10.449s-4.678-10.449-10.449-10.449H80.457a9.926 9.926 0 00-9.404 4.702L2.09 250.776a6.27 6.27 0 00-2.09 4.18v130.09c.832 29.282 24.524 52.744 53.812 53.29h341.682c29.289-.546 52.98-24.008 53.812-53.29v-130.09a9.918 9.918 0 00-1.567-4.18z" />
                                <SvgPath d="M217.339 252.865c3.706 4.04 9.986 4.31 14.025.603a9.8 9.8 0 00.603-.603l71.053-71.576a10.45 10.45 0 00-14.629-14.629l-53.29 53.29V21.42c0-5.771-4.678-10.449-10.449-10.449s-10.449 4.678-10.449 10.449v198.531l-53.29-53.29a10.45 10.45 0 00-14.629 14.629l71.055 71.575z" />
                            </Svg> : <Svg viewBox="0 0 449.306 449.306" height={22} width={22} fill={color} fillRule="nonzero">
                                    <SvgPath d="M447.739 250.776l-58.514-125.91a10.447 10.447 0 00-9.927-5.224h-50.155c-5.771 0-10.449 4.678-10.449 10.449s4.678 10.449 10.449 10.449h43.363l48.588 104.49h-59.559c-27.004-.133-51.563 15.625-62.694 40.229a48.588 48.588 0 01-43.886 27.69h-60.604a48.59 48.59 0 01-43.886-27.69c-11.131-24.604-35.69-40.362-62.694-40.229H29.257l57.469-104.49h33.437c5.771 0 10.449-4.678 10.449-10.449s-4.678-10.449-10.449-10.449H80.457a9.926 9.926 0 00-9.404 4.702L2.09 250.776a6.27 6.27 0 00-2.09 4.18v130.09c.832 29.282 24.524 52.744 53.812 53.29h341.682c29.289-.546 52.98-24.008 53.812-53.29v-130.09a9.918 9.918 0 00-1.567-4.18z" />
                                    <SvgPath d="M217.339 252.865c3.706 4.04 9.986 4.31 14.025.603a9.8 9.8 0 00.603-.603l71.053-71.576a10.45 10.45 0 00-14.629-14.629l-53.29 53.29V21.42c0-5.771-4.678-10.449-10.449-10.449s-10.449 4.678-10.449 10.449v198.531l-53.29-53.29a10.45 10.45 0 00-14.629 14.629l71.055 71.575z" />
                                </Svg>;
                        } else if (route.name === 'SentMessage') {
                            iconName = focused ? <Svg height={22} width={22} fill={color} viewBox="0 0 449.306 449.306" >
                                <SvgPath d="M160.914 98.834l53.29-53.812v192.784c0 5.771 4.678 10.449 10.449 10.449s10.449-4.678 10.449-10.449V45.021l53.29 53.812a11.496 11.496 0 0014.629 0 10.971 10.971 0 000-15.151l-71.053-71.576a10.972 10.972 0 00-14.629 0l-71.053 71.576a10.971 10.971 0 000 15.151 10.97 10.97 0 0014.628.001z" />
                                <SvgPath d="M447.739 255.568L389.225 128.09a11.495 11.495 0 00-9.927-6.792h-50.155c-5.771 0-10.449 4.678-10.449 10.449s4.678 10.449 10.449 10.449h43.363l48.588 109.714h-59.559c-27.004-.133-51.563 15.625-62.694 40.229a48.588 48.588 0 01-43.886 27.69h-60.604a48.59 48.59 0 01-43.886-27.69c-11.131-24.604-35.69-40.362-62.694-40.229H29.257l57.469-109.714h33.437c5.771 0 10.449-4.678 10.449-10.449s-4.678-10.449-10.449-10.449H80.457a11.494 11.494 0 00-9.404 6.269L2.09 254.523A10.975 10.975 0 000 259.747V390.36c0 28.735 25.078 49.633 53.812 49.633h341.682c28.735 0 53.812-20.898 53.812-49.633V259.748a21.435 21.435 0 00-1.567-4.18z" />
                            </Svg> : <Svg height={22} width={22} fill={color} viewBox="0 0 449.306 449.306" >
                                    <SvgPath d="M160.914 98.834l53.29-53.812v192.784c0 5.771 4.678 10.449 10.449 10.449s10.449-4.678 10.449-10.449V45.021l53.29 53.812a11.496 11.496 0 0014.629 0 10.971 10.971 0 000-15.151l-71.053-71.576a10.972 10.972 0 00-14.629 0l-71.053 71.576a10.971 10.971 0 000 15.151 10.97 10.97 0 0014.628.001z" />
                                    <SvgPath d="M447.739 255.568L389.225 128.09a11.495 11.495 0 00-9.927-6.792h-50.155c-5.771 0-10.449 4.678-10.449 10.449s4.678 10.449 10.449 10.449h43.363l48.588 109.714h-59.559c-27.004-.133-51.563 15.625-62.694 40.229a48.588 48.588 0 01-43.886 27.69h-60.604a48.59 48.59 0 01-43.886-27.69c-11.131-24.604-35.69-40.362-62.694-40.229H29.257l57.469-109.714h33.437c5.771 0 10.449-4.678 10.449-10.449s-4.678-10.449-10.449-10.449H80.457a11.494 11.494 0 00-9.404 6.269L2.09 254.523A10.975 10.975 0 000 259.747V390.36c0 28.735 25.078 49.633 53.812 49.633h341.682c28.735 0 53.812-20.898 53.812-49.633V259.748a21.435 21.435 0 00-1.567-4.18z" />
                                </Svg>;
                        } else if (route.name === 'DraftMessage') {
                            iconName = focused ? <Svg viewBox="0 0 512 512" height={22} width={22} fill={color}>
                                <SvgPath d="M473.886 85.384c-.019-.149-.037-.297-.058-.446-.068-.47-.146-.938-.238-1.403-.053-.276-.116-.549-.177-.822-.085-.374-.167-.747-.267-1.117a28.517 28.517 0 00-.593-1.952c-.067-.193-.131-.387-.202-.578-.055-.149-.116-.296-.174-.444a28.617 28.617 0 00-.378-.928c-.035-.082-.073-.163-.109-.244a29.078 29.078 0 00-.51-1.088l-.071-.141a27.967 27.967 0 00-.61-1.147l-.055-.096a28.572 28.572 0 00-.683-1.139l-.06-.094a27.12 27.12 0 00-.73-1.087l-.082-.117a27.316 27.316 0 00-.756-1.009c-.04-.052-.079-.104-.12-.155-.249-.313-.506-.62-.769-.923-.055-.063-.107-.128-.163-.191a27.115 27.115 0 00-.8-.865c-.061-.063-.118-.128-.179-.191-.333-.34-.673-.673-1.024-.998l-32.863-30.362-32.862-30.365a28.603 28.603 0 00-1.682-1.429 28.102 28.102 0 00-3.131-2.145l-.096-.057a28.212 28.212 0 00-2.052-1.077c-.139-.066-.28-.129-.42-.193a27.88 27.88 0 00-1.918-.798c-.074-.027-.146-.057-.22-.084a28.06 28.06 0 00-4.746-1.264c-.02-.003-.038-.009-.058-.013-.019-.003-.039-.003-.058-.007A28.373 28.373 0 00380.227 0H204.85c-17.763 0-32.213 14.45-32.213 32.212v213.592c-.555-.007-1.109-.021-1.666-.021-73.396 0-133.108 59.712-133.108 133.108S97.573 512 170.971 512c59.359 0 109.76-39.059 126.871-92.822h144.084c17.762 0 32.212-14.45 32.212-32.212V88.909c0-1.186-.102-2.36-.252-3.525zm-80.562-56.24l52.543 48.544h-47.608a4.94 4.94 0 01-4.935-4.934v-43.61zm-111.07 370.034a112.026 112.026 0 01-5.596 20C260.39 461.712 219.154 492 170.971 492c-62.368 0-113.108-50.74-113.108-113.108s50.74-113.108 113.108-113.108c.557 0 1.111.013 1.666.021a113.09 113.09 0 0120 2.07c52.038 10.137 91.442 56.059 91.442 111.018 0 6.922-.628 13.701-1.825 20.285zm171.885-12.212h-.001c0 6.734-5.479 12.212-12.212 12.212h-139.39a133.587 133.587 0 001.543-20.286c0-66.019-48.315-120.957-111.442-131.336V32.212c0-6.734 5.479-12.212 12.213-12.212h168.475v52.753c0 13.749 11.186 24.934 24.935 24.934h55.879v289.279z" />
                                <SvgPath d="M192.637 286.55a95.7 95.7 0 00-22.564-2.688c-52.895 0-95.928 43.033-95.928 95.928 0 17.422 4.72 34.486 13.65 49.347a9.998 9.998 0 0013.722 3.42c4.734-2.845 6.266-8.988 3.421-13.722-7.061-11.75-10.793-25.251-10.793-39.045 0-41.867 34.062-75.928 75.928-75.928.86 0 1.711.037 2.564.065 6.938.232 13.65 1.378 20 3.358C223.518 316.917 246 345.778 246 379.791a75.75 75.75 0 01-2.518 19.387 75.52 75.52 0 01-8.519 20c-13.337 21.892-37.435 36.541-64.89 36.541-3.501 0-7.019-.24-10.453-.713-5.474-.748-10.518 3.072-11.271 8.543-.754 5.471 3.071 10.517 8.542 11.271 4.336.597 8.771.899 13.182.899 38.865 0 72.406-23.233 87.464-56.541a95.175 95.175 0 006.494-20 95.959 95.959 0 001.97-19.387c-.001-45.125-31.322-83.066-73.364-93.241zM248.818 124.758c-5.522 0-10 4.477-10 10s4.478 10 10 10h149.228c5.522 0 10-4.477 10-10s-4.478-10-10-10H248.818zM368.046 198.397c0-5.523-4.478-10-10-10H248.818c-5.522 0-10 4.477-10 10s4.478 10 10 10h109.228c5.522 0 10-4.477 10-10zM398.046 252.036h-96.388c-5.522 0-10 4.477-10 10s4.478 10 10 10h96.388c5.522 0 10-4.477 10-10s-4.478-10-10-10zM398.046 315.674h-69.658c-5.522 0-10 4.477-10 10s4.478 10 10 10h69.658c5.522 0 10-4.477 10-10s-4.478-10-10-10z" />
                                <SvgPath d="M170.072 389.791h33.595c5.522 0 10-4.477 10-10s-4.478-10-10-10H175.833l-3.196-5.513-20.073-34.62c-2.771-4.777-8.887-6.405-13.668-3.635-4.777 2.771-6.404 8.889-3.635 13.667l26.16 45.116a9.998 9.998 0 008.651 4.985zM131.169 447.16a9.937 9.937 0 00-.92-1.73 9.57 9.57 0 00-1.24-1.52 9.57 9.57 0 00-1.52-1.24 9.87 9.87 0 00-1.73-.92c-.6-.25-1.229-.45-1.87-.57a9.898 9.898 0 00-3.91 0c-.63.12-1.26.32-1.87.57-.6.25-1.18.56-1.72.92-.55.36-1.06.78-1.52 1.24a9.87 9.87 0 00-2.17 3.25 9.84 9.84 0 00-.76 3.82c0 .65.061 1.31.19 1.96.13.63.32 1.26.57 1.87.25.6.56 1.18.92 1.72.37.55.779 1.06 1.25 1.52.46.46.97.88 1.52 1.24.54.36 1.12.67 1.72.92.61.25 1.24.45 1.87.57.65.13 1.311.2 1.96.2.65 0 1.311-.07 1.95-.2a9.352 9.352 0 001.87-.57 9.87 9.87 0 001.73-.92 9.57 9.57 0 001.52-1.24c.46-.46.88-.97 1.24-1.52.359-.54.67-1.12.92-1.72.25-.61.439-1.24.57-1.87.13-.65.199-1.31.199-1.96a10.098 10.098 0 00-.769-3.82zM407.28 194.04a9.874 9.874 0 00-.921-1.73 9.51 9.51 0 00-1.239-1.52c-.46-.46-.971-.88-1.521-1.24a10.122 10.122 0 00-3.599-1.49 9.898 9.898 0 00-3.91 0c-.64.13-1.271.32-1.87.57s-1.18.56-1.729.92a9.97 9.97 0 00-1.511 1.24c-.47.46-.88.97-1.25 1.52a10.096 10.096 0 00-1.489 3.6c-.131.64-.19 1.3-.19 1.95 0 .65.06 1.31.19 1.96.13.63.319 1.26.569 1.87.25.6.561 1.18.92 1.72.37.55.78 1.06 1.25 1.52.46.46.971.88 1.511 1.25.55.36 1.13.67 1.729.92s1.23.44 1.87.57c.65.13 1.31.19 1.96.19a9.84 9.84 0 003.82-.76c.6-.25 1.189-.56 1.729-.92.55-.37 1.061-.79 1.521-1.25.46-.46.88-.97 1.239-1.52.36-.54.671-1.12.921-1.72.25-.61.439-1.24.569-1.87.13-.65.2-1.31.2-1.96s-.07-1.31-.2-1.95a10.02 10.02 0 00-.569-1.87z" />
                            </Svg> : <Svg viewBox="0 0 512 512" height={22} width={22} fill={color}>
                                    <SvgPath d="M473.886 85.384c-.019-.149-.037-.297-.058-.446-.068-.47-.146-.938-.238-1.403-.053-.276-.116-.549-.177-.822-.085-.374-.167-.747-.267-1.117a28.517 28.517 0 00-.593-1.952c-.067-.193-.131-.387-.202-.578-.055-.149-.116-.296-.174-.444a28.617 28.617 0 00-.378-.928c-.035-.082-.073-.163-.109-.244a29.078 29.078 0 00-.51-1.088l-.071-.141a27.967 27.967 0 00-.61-1.147l-.055-.096a28.572 28.572 0 00-.683-1.139l-.06-.094a27.12 27.12 0 00-.73-1.087l-.082-.117a27.316 27.316 0 00-.756-1.009c-.04-.052-.079-.104-.12-.155-.249-.313-.506-.62-.769-.923-.055-.063-.107-.128-.163-.191a27.115 27.115 0 00-.8-.865c-.061-.063-.118-.128-.179-.191-.333-.34-.673-.673-1.024-.998l-32.863-30.362-32.862-30.365a28.603 28.603 0 00-1.682-1.429 28.102 28.102 0 00-3.131-2.145l-.096-.057a28.212 28.212 0 00-2.052-1.077c-.139-.066-.28-.129-.42-.193a27.88 27.88 0 00-1.918-.798c-.074-.027-.146-.057-.22-.084a28.06 28.06 0 00-4.746-1.264c-.02-.003-.038-.009-.058-.013-.019-.003-.039-.003-.058-.007A28.373 28.373 0 00380.227 0H204.85c-17.763 0-32.213 14.45-32.213 32.212v213.592c-.555-.007-1.109-.021-1.666-.021-73.396 0-133.108 59.712-133.108 133.108S97.573 512 170.971 512c59.359 0 109.76-39.059 126.871-92.822h144.084c17.762 0 32.212-14.45 32.212-32.212V88.909c0-1.186-.102-2.36-.252-3.525zm-80.562-56.24l52.543 48.544h-47.608a4.94 4.94 0 01-4.935-4.934v-43.61zm-111.07 370.034a112.026 112.026 0 01-5.596 20C260.39 461.712 219.154 492 170.971 492c-62.368 0-113.108-50.74-113.108-113.108s50.74-113.108 113.108-113.108c.557 0 1.111.013 1.666.021a113.09 113.09 0 0120 2.07c52.038 10.137 91.442 56.059 91.442 111.018 0 6.922-.628 13.701-1.825 20.285zm171.885-12.212h-.001c0 6.734-5.479 12.212-12.212 12.212h-139.39a133.587 133.587 0 001.543-20.286c0-66.019-48.315-120.957-111.442-131.336V32.212c0-6.734 5.479-12.212 12.213-12.212h168.475v52.753c0 13.749 11.186 24.934 24.935 24.934h55.879v289.279z" />
                                    <SvgPath d="M192.637 286.55a95.7 95.7 0 00-22.564-2.688c-52.895 0-95.928 43.033-95.928 95.928 0 17.422 4.72 34.486 13.65 49.347a9.998 9.998 0 0013.722 3.42c4.734-2.845 6.266-8.988 3.421-13.722-7.061-11.75-10.793-25.251-10.793-39.045 0-41.867 34.062-75.928 75.928-75.928.86 0 1.711.037 2.564.065 6.938.232 13.65 1.378 20 3.358C223.518 316.917 246 345.778 246 379.791a75.75 75.75 0 01-2.518 19.387 75.52 75.52 0 01-8.519 20c-13.337 21.892-37.435 36.541-64.89 36.541-3.501 0-7.019-.24-10.453-.713-5.474-.748-10.518 3.072-11.271 8.543-.754 5.471 3.071 10.517 8.542 11.271 4.336.597 8.771.899 13.182.899 38.865 0 72.406-23.233 87.464-56.541a95.175 95.175 0 006.494-20 95.959 95.959 0 001.97-19.387c-.001-45.125-31.322-83.066-73.364-93.241zM248.818 124.758c-5.522 0-10 4.477-10 10s4.478 10 10 10h149.228c5.522 0 10-4.477 10-10s-4.478-10-10-10H248.818zM368.046 198.397c0-5.523-4.478-10-10-10H248.818c-5.522 0-10 4.477-10 10s4.478 10 10 10h109.228c5.522 0 10-4.477 10-10zM398.046 252.036h-96.388c-5.522 0-10 4.477-10 10s4.478 10 10 10h96.388c5.522 0 10-4.477 10-10s-4.478-10-10-10zM398.046 315.674h-69.658c-5.522 0-10 4.477-10 10s4.478 10 10 10h69.658c5.522 0 10-4.477 10-10s-4.478-10-10-10z" />
                                    <SvgPath d="M170.072 389.791h33.595c5.522 0 10-4.477 10-10s-4.478-10-10-10H175.833l-3.196-5.513-20.073-34.62c-2.771-4.777-8.887-6.405-13.668-3.635-4.777 2.771-6.404 8.889-3.635 13.667l26.16 45.116a9.998 9.998 0 008.651 4.985zM131.169 447.16a9.937 9.937 0 00-.92-1.73 9.57 9.57 0 00-1.24-1.52 9.57 9.57 0 00-1.52-1.24 9.87 9.87 0 00-1.73-.92c-.6-.25-1.229-.45-1.87-.57a9.898 9.898 0 00-3.91 0c-.63.12-1.26.32-1.87.57-.6.25-1.18.56-1.72.92-.55.36-1.06.78-1.52 1.24a9.87 9.87 0 00-2.17 3.25 9.84 9.84 0 00-.76 3.82c0 .65.061 1.31.19 1.96.13.63.32 1.26.57 1.87.25.6.56 1.18.92 1.72.37.55.779 1.06 1.25 1.52.46.46.97.88 1.52 1.24.54.36 1.12.67 1.72.92.61.25 1.24.45 1.87.57.65.13 1.311.2 1.96.2.65 0 1.311-.07 1.95-.2a9.352 9.352 0 001.87-.57 9.87 9.87 0 001.73-.92 9.57 9.57 0 001.52-1.24c.46-.46.88-.97 1.24-1.52.359-.54.67-1.12.92-1.72.25-.61.439-1.24.57-1.87.13-.65.199-1.31.199-1.96a10.098 10.098 0 00-.769-3.82zM407.28 194.04a9.874 9.874 0 00-.921-1.73 9.51 9.51 0 00-1.239-1.52c-.46-.46-.971-.88-1.521-1.24a10.122 10.122 0 00-3.599-1.49 9.898 9.898 0 00-3.91 0c-.64.13-1.271.32-1.87.57s-1.18.56-1.729.92a9.97 9.97 0 00-1.511 1.24c-.47.46-.88.97-1.25 1.52a10.096 10.096 0 00-1.489 3.6c-.131.64-.19 1.3-.19 1.95 0 .65.06 1.31.19 1.96.13.63.319 1.26.569 1.87.25.6.561 1.18.92 1.72.37.55.78 1.06 1.25 1.52.46.46.971.88 1.511 1.25.55.36 1.13.67 1.729.92s1.23.44 1.87.57c.65.13 1.31.19 1.96.19a9.84 9.84 0 003.82-.76c.6-.25 1.189-.56 1.729-.92.55-.37 1.061-.79 1.521-1.25.46-.46.88-.97 1.239-1.52.36-.54.671-1.12.921-1.72.25-.61.439-1.24.569-1.87.13-.65.2-1.31.2-1.96s-.07-1.31-.2-1.95a10.02 10.02 0 00-.569-1.87z" />
                                </Svg>
                        }

                        // You can return any component that you like here!
                        return iconName;
                    },
                })}
                tabBarOptions={{
                    showIcon: true,
                    showLabel: true,
                    labelStyle: { fontSize: 11 },
                    style: {
                        height: 60,
                        backgroundColor: '#F3F3F3'
                    },
                    indicatorStyle: {
                        backgroundColor: 'tomato',
                        position: 'absolute'
                    },
                    activeTintColor: 'tomato',
                    inactiveTintColor: 'gray',
                }}
                tabBarPosition="top"
            >
                <MessageTopTab.Screen
                    name="ReceivedMessage"
                    component={ReceivedMessage}
                    options={{
                        title: 'Inbox',
                    }}

                />
                <MessageTopTab.Screen
                    name="SentMessage"
                    component={SentMessage}
                    options={{
                        title: 'Sent',
                    }}
                />

                <MessageTopTab.Screen
                    name="DraftMessage"
                    component={Drafts}
                    options={{
                        title: 'Drafts',
                    }}
                />
            </MessageTopTab.Navigator>
        </View>
    );
}

function getHeaderTitle(route) {
    const routeName = route.state?.routes[route.state.index]?.name;

    switch (routeName) {
        case 'None':
            return 'How to get started';
        case 'Links':
            return 'Links to learn more';
        default:
            return 'Messaging';
    }
}
